import{z as f,H as c,A as u,c as d,o as m,L as i}from"./CaSnHAEL.js";const p={class:"form-embed"},I={__name:"FormEmbed",props:{region:{type:String,default:""},formId:{type:String,default:""},portalId:{type:String,default:""},timer:{type:Boolean,default:!1},parent:{type:String,default:"form"}},setup(r){const t=r;let o=0;const s=n=>{let e="";t.parent=="form"?e="formSubmit":e="subscribeSubmit",window.dataLayer=window.dataLayer||[];const a={event:e};n.submissionValues.email&&Object.assign(a,{email:btoa(n.submissionValues.email)}),window.dataLayer.push(a)},l=()=>{document.getElementById(`form-${t.formId}`)&&(window.clearInterval(o),window.hbspt.forms.create({region:t.region,portalId:t.portalId,formId:t.formId,target:`#form-${t.formId}`,onFormSubmitted:(n,e)=>s(e)}))};return f(()=>{console.log("Mounted FormEmbed component"),c(()=>{window.clearInterval(o),window.hbspt&&(o=window.setInterval(l,500))})}),u(()=>{window.clearInterval(o),o=0}),(n,e)=>(m(),d("div",p,[e[0]||(i(-1,!0),(e[0]=(m(),d("div",{class:"form-embed__content",id:`form-${r.formId}`,key:r.formId},null,8,["id"]))).cacheIndex=0,i(1),e[0])]))}};export{I as default};
